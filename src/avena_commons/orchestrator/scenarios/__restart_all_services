{
  "name": "Restart wszystkich usług systemu (@all)",
  "description": "Autonomiczny scenariusz restartowy - uruchamiany gdy którakolwiek usługa jest zatrzymana ale żadna nie ma błędu",
  "priority": 98,
  "cooldown": 60,
  "trigger": {
    "type": "automatic",
    "conditions": {
      "client_state": {
        "all_services_in_state": "STOPPED"
      }
    }
  },
  "actions": [
    {
      "type": "log_event",
      "level": "info",
      "message": "AUTONOMICZNY RESTART: Wykryto zatrzymane usługi - rozpoczynam automatyczne restart",
      "description": "Informacja o autonomicznym wyzwoleniu scenariusza"
    },
    {
      "type": "log_event",
      "level": "info",
      "message": "Warunki spełnione: znaleziono komponenty w stanie STOPPED",
      "description": "Potwierdzenie spełnienia warunków autonomicznych"
    },
    {
      "type": "log_event",
      "level": "info",
      "message": "Autonomiczne restart wszystkich komponentów (@all)...",
      "description": "Rozpoczęcie autonomicznego restartu"
    },
    {
      "type": "send_command",
      "target": "@all",
      "command": "CMD_RESTART",
      "description": "Restart wszystkich komponentów systemu"
    },
    {
      "type": "wait_for_state",
      "target": "@all",
      "target_state": "STOPPED",
      "timeout": "60s",
      "description": "Oczekiwanie na restart wszystkich komponentów"
    },
    {
      "type": "log_event",
      "level": "info",
      "message": "System autonomicznie przywrócony do pracy - wszystkie usługi w stanie STOPPED",
      "description": "Potwierdzenie autonomicznego restartu systemu"
    }
  ]
}